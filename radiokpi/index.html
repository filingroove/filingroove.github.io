<xsl:template match = "/icestats" >
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,600,700&subset=latin,cyrillic-ext' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="normalize.css">
	<title>Радіо КПІ: Статус</title>
	<style>

		body {
			background: #f0f0f0;
			font-family: 'Open Sans', sans-serif;
			color: #010100;
		}

		.container {
			padding: 120px;
		}

		header .top {
			height: 180px;
			width: 100%;
			overflow: hidden;	
		}

		header .top .play-button {
			width: 180px;
			height: 180px;
			margin-right: 30px;
			float: left;
			background: #ffae00 url('play87.svg') 54px 50% no-repeat;
			background-size: 80px;
		}

		header .top .metadata {
			float: left;
			height: 100%;
			position: relative;
		}

		header .top .metadata .title, header .top .metadata .on_air {
			font-size: 36px;
			font-weight: 700;
			float: left;
			margin: 64px 0px;
		}

		header .top .metadata .title {
			margin: 64px 30px;
			text-transform: uppercase;
		}

		header .bottom {
			display: flex;
			margin: 50px auto;
			justify-content: space-between;
		}

		header .bottom a {
			font-weight: 700;
			display: block;
			font-size: 16px;
			text-transform: uppercase;
			color: #010100;
			text-decoration: none;
		}

		header .bottom a:hover {
			opacity: 0.7;
		}
	</style>
</head>
<body>
	<div class="container">
		
		<header>
			<div class="top">
				<div class="play-button"></div>
				<div class="metadata">
					<h1 class="title">Радіо КПІ:</h1>
					<div class="on_air">Whatever is on air now</div>
				</div>
			</div>
			<div class="bottom">
				<a href="javascript:void(0)">публикации</a>
				<a href="javascript:void(0)">программы</a>
				<a href="javascript:void(0)">репортажи</a>
				<a href="javascript:void(0)">написать в эфир</a>
				<a href="javascript:void(0)">стать частью радио</a>
				<a href="javascript:void(0)">о нас</a>
			</div>
		</header>

		<div class="status">
			<xsl:for-each select="source">
			<xsl:choose>
			<xsl:when test="listeners">
			<div class="roundcont">
			<div class="roundtop">
			<img src="/corner_topleft.jpg" class="corner" style="display: none" />
			</div>
			<div class="newscontent">
			    <div class="streamheader">
			        <table cellspacing="0" cellpadding="0">
			            <colgroup align="left" />
			            <colgroup align="right" width="300" />
			            <tr>
			                <td><h3>Mount Point <xsl:value-of select="@mount" /></h3></td>
			                <xsl:choose>
			                    <xsl:when test="authenticator">
			                        <td align="right"><a class="auth" href="/auth.xsl">Login</a></td>
			                    </xsl:when>
			                    <xsl:otherwise>
			                        <td align="right"> <a href="{@mount}.m3u">M3U</a> <a href="{@mount}.xspf">XSPF</a></td>
			                    </xsl:otherwise>
			                </xsl:choose>
			        </tr></table>
			    </div>

			<table border="0" cellpadding="4">
			<xsl:if test="server_name">
			<tr><td>Stream Title:</td><td class="streamdata"> <xsl:value-of select="server_name" /></td></tr>
			</xsl:if>
			<xsl:if test="server_description">
			<tr><td>Stream Description:</td><td class="streamdata"> <xsl:value-of select="server_description" /></td></tr>
			</xsl:if>
			<xsl:if test="server_type">
			<tr><td>Content Type:</td><td class="streamdata"><xsl:value-of select="server_type" /></td></tr>
			</xsl:if>
			<xsl:if test="stream_start">
			<tr><td>Mount started:</td><td class="streamdata"><xsl:value-of select="stream_start" /></td></tr>
			</xsl:if>
			<xsl:if test="bitrate">
			<tr><td>Bitrate:</td><td class="streamdata"> <xsl:value-of select="bitrate" /></td></tr>
			</xsl:if>
			<xsl:if test="quality">
			<tr><td>Quality:</td><td class="streamdata"> <xsl:value-of select="quality" /></td></tr>
			</xsl:if>
			<xsl:if test="video_quality">
			<tr><td>Video Quality:</td><td class="streamdata"> <xsl:value-of select="video_quality" /></td></tr>
			</xsl:if>
			<xsl:if test="frame_size">
			<tr><td>Framesize:</td><td class="streamdata"> <xsl:value-of select="frame_size" /></td></tr>
			</xsl:if>
			<xsl:if test="frame_rate">
			<tr><td>Framerate:</td><td class="streamdata"> <xsl:value-of select="frame_rate" /></td></tr>
			</xsl:if>
			<xsl:if test="listeners">
			<tr><td>Current Listeners:</td><td class="streamdata"> <xsl:value-of select="listeners" /></td></tr>
			</xsl:if>
			<xsl:if test="listener_peak">
			<tr><td>Peak Listeners:</td><td class="streamdata"> <xsl:value-of select="listener_peak" /></td></tr>
			</xsl:if>
			<xsl:if test="genre">
			<tr><td>Stream Genre:</td><td class="streamdata"> <xsl:value-of select="genre" /></td></tr>
			</xsl:if>
			<xsl:if test="server_url">
			<tr><td>Stream URL:</td><td class="streamdata"> <a target="_blank" href="{server_url}"><xsl:value-of select="server_url" /></a></td></tr>
			</xsl:if>
			<tr><td>Current Song:</td><td class="streamdata"> 
			<xsl:if test="artist"><xsl:value-of select="artist" /> - </xsl:if><xsl:value-of select="title" /></td></tr>
			</table>
			</div>
			<div class="roundbottom">
			<img src="/corner_bottomleft.jpg" class="corner" style="display: none" />
			</div>
			</div>
			<br />
			<br />
			</xsl:when>
			<xsl:otherwise>
			<h3><xsl:value-of select="@mount" /> - Not Connected</h3>
			</xsl:otherwise>
			</xsl:choose>

			</xsl:for-each>
			<xsl:text disable-output-escaping="yes">&amp;</xsl:text>nbsp;
		</div>

		<footer>
			
		</footer>
	</div>
</body>
</html>